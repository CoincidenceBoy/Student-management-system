#### 差分测试 Differential testing

##### 1.概念

​		差动检测，也被称为差动起毛，是一种流行的软件测试技术，其试图检测的错误，通过提供相同的输入到一系列的类似的应用（或者同一应用程序的不同的实施方式），并观察的差异他们的执行。差异测试是对传统软件测试的补充，因为它非常适合发现没有表现出明显错误行为（如崩溃或断言失败）的语义或逻辑错误。差异测试有时称为背靠背测试。

​		差异测试通过使用与交叉引用预言机相同功能的不同实现来发现语义错误，在相同输入上查明其输出的差异：同一输入上的程序行为之间的任何差异都被标记为潜在错误。

##### 2.应用

​		差异测试已被用于在不同领域成功发现语义错误，如SSL/TLS实现、C编译器、 Java 反编译器、JVM实现、Web应用防火墙、API安全策略和防病毒软件。差异测试也被用于不同网络协议实现的自动指纹生成。

##### 3.输入生成

##### 3.1无引导

​		非引导式差分测试工具在迭代中独立生成测试输入，而无需考虑测试程序对过去输入的行为。这种输入生成过程不使用来自过去输入的任何信息，并且本质上是从非常大的输入空间中随机创建新输入。这会使测试过程非常低效，因为需要生成大量输入才能找到单个错误。

​		执行无引导输入生成的差分测试系统的一个例子是“Frankencerts”。这项工作通过随机组合真实证书的部分来合成 Frankencer。它使用语法上有效的证书来测试跨多个实现的 SSL/TLS 证书验证的语义违规。但是，由于 Frankencer 的创建和选择完全没有引导，因此与引导工具相比，效率明显低下。

##### 3.2引导

​		引导输入生成过程旨在通过考虑过去输入的程序行为信息来最小化查找每个错误所需的输入数量。

**特定领域的进化指导**

​		执行特定领域覆盖引导输入生成的差分测试系统的一个例子是 Mucerts。Mucerts 依赖于X.509证书格式的部分语法知识，并使用随机采样算法来驱动其输入生成，同时跟踪程序覆盖率。

​		另一项研究建立在观察的基础上，即从现有输入生成新输入的问题可以建模为一个随机过程。使用这种随机过程建模进行输入生成的差分测试工具的一个例子是 Chen 等人的工具。它使用马尔可夫链蒙特卡罗(MCMC) 采样对输入生成进行Java 虚拟机(JVM)差异测试。它通过利用 Java 类文件格式的详细知识来使用自定义的特定于域的突变。

##### 独立于领域的进化指导

​		NEZHA 是一个差分测试工具的例子，它具有面向独立于域的差分测试的路径选择机制。它使用特定的指标（称为 delta-diversity）来总结和量化观察到的多个测试应用程序行为之间的不对称性。这种促进观察到的程序行为的相对多样性的指标已证明在以独立于领域和黑盒的方式应用差异测试方面是有效的。

**基于自动机学习的指导**
		对于跨站点脚本(XSS) 过滤器和 X.509 证书主机名验证等应用程序，可以使用有限状态自动机(FSA)准确建模，反例驱动的 FSA 学习技术可用于生成输入更有可能发现错误。

**基于符号执行的指导**
		符号执行[13]是一种白盒技术，它以符号方式执行程序，计算沿不同路径的约束，并使用约束求解器生成满足沿每条路径收集的约束的输入。符号执行也可用于生成差分测试的输入。

​		符号执行辅助测试工具的固有限制——路径爆炸和可扩展性——被放大，尤其是在使用多个测试程序的差异测试环境中。因此，很难扩展符号执行技术来执行多个大型程序的差异测试。